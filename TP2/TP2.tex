\input{Preamble.tex}

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%								CARATULA								%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\input{Caratula.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%								INFORME									%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%TABLE OF CONTENTS
\tableofcontents
\newpage


\section{Introducción}
En el presente trabajo de laboratorio se estudian filtros RLC de segundo orden, haciendo uso del osciloscopio, el generador de funciones y el analizador de impedancias. También, se realiza un programa para automatizar las mediciones del osciloscopio; dicho programa será de gran utilidad en trabajos prácticos futuros.

\input{Ejercicio_1(Germo)/ejercicio1.tex}

\section{Filtro pasabajos}

En esta sección se analizó la respuesta al escalón del circuito mostrado en la Figura (\ref{fig:rlc}). Sabiendo que $L = 500 \ \mu H$, $C = 33 \ nF$ y $\xi = 0.33$, se determinó que $R = 81.24 \ \Omega$. Además, se calculó la frecuencia de resonancia de este circuito, siendo esta $f_0 = 39.2 \ kHz$. Para determinar R se analizó primero la transferencia. Tenemos que la funcón transferencia del circuito es:

\begin{equation}
	H(s) = \frac{1}{LC s^2 + RC s + 1}
	\label{equ:hrlc}
\end{equation}

Sabiendo que $w_0=\frac{1}{\sqrt{LC}}$ y escribiendo el denominador de $H(s)$ la forma $1+2\xi\frac{s}{w_0}+(\frac{s}{w_0})^2$ obtenemos \begin{equation}
    H(s)=\frac{1}{1+RC\frac{1}{\sqrt{LC}}\frac{s}{\frac{1}{\sqrt{LC}}}+(\frac{s}{\frac{1}{\sqrt{LC}}})^2}=\frac{1}{1+R\sqrt{\frac{C}{L}}\frac{s}{w_0}+(\frac{s}{w_0})^2}
\end{equation}
Por lo tanto, se tiene que $2\xi=R\sqrt{\frac{C}{L}}$, de donde como $\xi=0,33$, $L=500\mu H$ y $C=33nF$, se encuentra $R=81,24\Omega$


\begin{figure}[H]
\begin{center}
\begin{circuitikz}
	\node [buffer](buff){};
	\draw (buff.out) to[short] ++(0.25,0) to[L, l = $L$] ++(2,0) to[R, l = $R$] ++(2.5,0) node[](Vcpos){};
	\draw (Vcpos) to[C, l_= $C$, v^= $V_C$] ++(0,-2) node[](Vcneg){};
	\draw (buff.in) to[short] ++(-0.5,0) to[sV, v_=$V_i$] ++(0,-2) to[short] node[ground]{} (Vcneg);
\end{circuitikz}
\caption{Primera etapa del circuito.}
	\label{fig:rlc}
\end{center}
\end{figure}

Luego se procedió a analizar distintos valores de importancia del circuito, como lo son la frecuencia de oscilación del transitorio, el tiempo de establecimiento del $5 \ \%$ y el sobrepico. Para ello se analiza nuevamente la transferencia del circuito hallada en (\ref{equ:hrlc})

\begin{equation*}
	H(S) = \frac{1}{LC S^2 + RC S + 1}
	\label{equ:hrlc}
\end{equation*}

Es así que, sabiendo que la transformada de Laplace del escalón es $\frac{1}{S}$, y la salida del sistema es $Y(S) = X(S) \cdot H(S)$, se obtuvo la respuesta al escalón de este:

\begin{equation} \hspace*{-1cm}
	V_{C}(t) = 1 - e^{-t \frac{R}{2L}} \cdot \left[\frac{1}{2 \sqrt{4LC - {RC}^2}} \cdot sen \left( \frac{\sqrt{4LC - {RC}^2}}{2LC} \cdot t \right) + cos \left( \frac{\sqrt{4LC - {RC}^2}}{2LC} \cdot t - \pi \right) \right]
	\label{equ:vc}
\end{equation} 

Además, se sabe que la frecuencia de oscilación del transitorio se puede calcular como

\begin{equation}
	f_t = f_0 \cdot \sqrt{|\xi^2 - 1|} = 37 \ kHz
	\label{equ:fres}
\end{equation}

Por otro lado, el sobrepico se calcula como 

\begin{equation}
    M_p=e^{\frac{-\xi\pi}{\sqrt{1-\xi^2}}}=333mV
    \label{equ:mp}
\end{equation}

Finalmente, el tiempo de establecimiento del $5\%$ puede calcularse de (\ref{equ:vc}) como
\begin{center}
	\textcolor{red}{\textbf{COLOCAR CALCULOS.}}
\end{center}

Considerando los valores comerciales, y sabiendo que se disponía de una bobina de una inductancia de $500 \ \mu H$, se utilizaron una resistencia de $82 \ \Omega$ y un capacitor de $33 \ nF$. Es así que se preparó el circuito en un protoboard y se procedió a realizar las mediciones pertinentes y así compararlas con los cálculos teóricos. Este circuito fue excitado con una señal cuadrada, la cual posee una frecuencia de $3.92 \ kHz$ y una amplitud tal que la tensión de salida máxima sea de $1 \ V_{pp}$. Es así que se observó la respuesta al escalón del sistema, al inicio de cada cuadrada.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth, trim = {0 3.4cm 0.4cm 2cm},clip]{Ejercicio2/Mediciones/A/scope_0.png}
\caption{Respuesta al escalón del circuito.}
	\label{fig:rtaescalon}
\end{figure}

De esta forma, se midió una frecuencia de oscilacón de $41 \ KhZ $, un sobrepico de $245 \ mV$ y un tiempo de establecimiento del 5\% de $33.6 \ \mu s$. Las discrepencias entre los valores teóricos y los medidos pueden deberse a varios factores: errores humanos, errores de instrumentacón.

Luego, se obtuvo el diagrama de BODE del sistema. Es así que se compara este con el teórico y con el simulado.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{Ejercicio2/Mediciones/Modulo.png}
\caption{Comparación de diagramas de Bode en módulo.}
	\label{fig:bodemod}
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{Ejercicio2/Mediciones/Fase.png}
\caption{Comparación de diagramas de Bode en fase.}
	\label{fig:bodefase}
\end{figure}

\begin{center}
	\textcolor{red}{\textbf{PUNTO E.}}
\end{center}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Filtro pasabanda}
Se analizó el circuito de la figura \ref{fig:pasabanda}

\begin{figure}[H]
\begin{center}
\begin{circuitikz}
	\node [buffer](buff){};
	\draw (buff.out) to[short] ++(0.25,0) to[L, l = $L$] ++(2,0) to[C, l = $C$] ++(2.5,0) node[](Vcpos){};
	\draw (Vcpos) to[R, l_= $R$, v^= $V_R$] ++(0,-2) node[](Vcneg){};
	\draw (buff.in) to[short] ++(-0.5,0) to[sV, v_=$V_i$] ++(0,-2) to[short] node[ground]{} (Vcneg);
\end{circuitikz}
\caption{Filtro pasabanda}
	\label{fig:pasabanda}
\end{center}
\end{figure}

En este caso la funcón transferencia es 

\begin{equation}
    H(s)=\frac{sRC}{1+sRC+s^{2}LC}
\label{eq:BandPass}
\end{equation}

La frecuencia de oscilación y el valor de sobrepico teóricos son los mismos que en el caso del filtro pasabajos, calculados en (\ref{equ:fres}) y (\ref{equ:mp}) respectivamente.
Se midió la respuesta en frecuencia del circuito (\ref{fig:pasaaltos}) para contrastar que el modelo analítico corresponda con la realidad, además se hizo una simulacion en \textbf{LTSpice} obteniendo los siguientes resultados:

\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{Bodes_Labo/Fotos/BP.png}
\caption{Comparación de diagramas de Bode en módulo Band-Pass.}
	\label{fig:BODEHP}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{Bodes_Labo/Fotos/BPP.png}
\caption{Comparación de diagramas de Bode en fase Band-Pass.}
	\label{fig:BODEBPP}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Filtro pasaaltos}
\subsection{Análisis del circuito}
Se analizó el circuito de la figura \ref{fig:pasaaltos}

\begin{figure}[H]
\begin{center}
\begin{circuitikz}
	\node [buffer](buff){};
	\draw (buff.out) to[short] ++(0.25,0) to[R, l = $R$] ++(2,0) to[C, l = $C$] ++(2.5,0) node[](Vcpos){};
	\draw (Vcpos) to[L, l_= $L$, v^= $V_L$] ++(0,-2) node[](Vcneg){};
	\draw (buff.in) to[short] ++(-0.5,0) to[sV, v_=$V_i$] ++(0,-2) to[short] node[ground]{} (Vcneg);
\end{circuitikz}
\caption{Filtro pasaaltos}
	\label{fig:pasaaltos}
\end{center}
\end{figure}

En este caso la función transferencia es
\begin{equation}
    H(s)=\frac{s^{2}LC}{1+sRC+s^{2}LC}
\label{eq:HighPass}
\end{equation}

Nuevamente, como el denominador de la función transferencia es el mismo que en los casos del filtro pasabanda y pasabajos, los valores teóricos de la frecuencia de oscilación y el sobrepico son los calculados en (\ref{equ:fres}) y (\ref{equ:mp}) respectivamente.
\subsection{Respuesta en frecuancia.}
Se midió la respuesta en frecuencia del circuito (\ref{fig:pasaaltos}) para contrastar que el modelo analítico corresponda con la realidad, además se hizo una simulacion en \textbf{LTSpice} obteniendo los siguientes resultados:
\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{Bodes_Labo/Fotos/HP.png}
\caption{Comparación de diagramas de Bode en módulo High-Pass.}
	\label{fig:BODEHP}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{Bodes_Labo/Fotos/HPP.png}
\caption{Comparación de diagramas de Bode en fase High-Pass.}
	\label{fig:BODEHPP}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Filtro Notch}

Se analizó el circuito mostrado en la figura \ref{fig:notch}
\begin{figure}[H]
\centering

\begin{circuitikz}
\draw
	(0,0) node[buffer](buff){}
	 (buff.out) to[short] ++(0.25,0)
		 to[R, l = $R$] ++(2,0) 
		 to[L, l = $L$] ++(2.5,0) 
		 node[](Vcpos){}
	(Vcpos) to[C, l_= $C$] ++(0,-2) 
		node[](Vcneg){}
	(buff.in) to[short] ++(-0.5,0) 
		to[sV, v_=$V_i$] ++(0,-2) 
		 node[ground]{} (Vcneg)
	(3.5,0) to [open,v=$V_o$] (3.5,-2)
;
\end{circuitikz}
\caption{Filtro Notch}
	\label{fig:notch}
\end{figure}

En este caso la transferencia está dada por 

\begin{equation}
    H(s)=\frac{1+s^ {2}LC}{1+sRC+s^ {2}LC}
\label{eq:BandReject}
\end{equation}

Los valores teóricos de la frecuencia de oscilación y el sobrepico son, nuevamente, los de (\ref{equ:fres}) y (\ref{equ:mp})
Se midió la respuesta en frecuencia del circuito (\ref{fig:pasaaltos}) para contrastar que el modelo analítico corresponda con la realidad, además se hizo una simulacion en \textbf{LTSpice} obteniendo los siguientes resultados:
\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{Bodes_Labo/Fotos/BR.png}
\caption{Comparación de diagramas de Bode en módulo Notch.}
	\label{fig:BODEBR}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{Bodes_Labo/Fotos/BRP.png}
\caption{Comparación de diagramas de Bode en fase Notch.}
	\label{fig:BODEBRP}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Medición del factor de calidad}
\subsection{Q Teórico}
Se calculó el valor del factor de calidad de forma teórica según 

\begin{equation}
    Q=\frac{1}{2\xi}=1,51
\end{equation}

Luego, para cada una de las configuraciones anteriores (pasabajos, pasaaltos, pasabanda y notch) se midió el factor de calidad y se lo comparó con el teórico.
\subsection{Q High/Low/Band-Pass}
Para medir el Q del circuito se puede apreciar que si en las ecuaciones (\ref{eq:HighPass}) , (\ref{eq:BandReject}) , (\ref{equ:hrlc}) se evalúa la función en $\omega_0 \implies |H(s)|=Q$

\subsection{Q Notch}
En este caso no era tan simple como evaluar la transferencia en un valor dado a que si se evalúa $H(j\omega_0)=0$, se optó por medir la respuesta al escalón, y de allí obtener el sobrepico, el cual esta ligado al $\xi$ por la siguiente ecuación:
\begin{align}M_p = e^{\frac{\pi \cdot \xi}{\sqrt{1-\xi^2}}} \end{align}
obteniendo la siguiente medición:
\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{Mediciones_pendrive_alan/scope_1.png}
\caption{Sobrepico de la respuesta al escalón en el Notch.}
	\label{fig:Overshoot5}
\end{figure}

\end{document}
